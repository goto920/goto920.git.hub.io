{"version":3,"sources":["App.js","serviceWorker.js","index.js"],"names":["audioCtx","gainNode","version","packageJSON","homepage","subversion","slice","window","AudioContext","webkitAudioContext","shifter","iOS","navigator","userAgent","match","App","props","params","filename","undefined","audioBuffer","isPlaying","loop","exportDataL","exportDataR","exportBuffer","save","state","playingAt","playingAtSlider","timeA","timeB","playSpeed","playPitch","playPitchSemi","playPitchCents","playVolume","startButtonStr","loopButtonStr","saveButtonStr","setState","bind","handleWindowClose","loadFile","handleSpeedSlider","handlePitchSlider","handleTimeSlider","handleVolumeSlider","handlePlay","handleSaveA","handleSaveB","fakeDownload","handleLoop","event","disconnect","off","close","createGain","addEventListener","this","removeEventListener","startBStyle","loopBStyle","saveBStyle","duration","color","className","type","name","accept","onChange","min","max","value","Math","round","step","onClick","style","href","target","rel","files","length","totalTime","file","reader","FileReader","onload","e","decodeAudioData","result","error","console","log","err","readAsArrayBuffer","tempo","pitchSemi","pitch","pow","vol","gain","buffer","createBuffer","source","createBufferSource","connect","destination","start","partialAudioBuffer","sampleRate","left","getChannelData","right","subarray","tmp","sample","numberOfChannels","PitchShifter","on","detail","setTime","parseFloat","timePlayed","percentagePlayed","isPlayng","outBufSize","parseInt","offlineCtx","OfflineAudioContext","oncomplete","renderedBuffer","startRendering","outFileName","split","blob","Blob","toWav","saveAs","saverNode","channels","createJavaScriptNode","createScriptProcessor","Float32Array","index","onaudioprocess","inputBuffer","outputBuffer","channel","inputData","outputData","Component","Boolean","location","hostname","ReactDOM","render","document","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"oNAcIA,EACAC,E,yHANEC,GAAWC,EAAYC,SAAWD,EAAYE,YAAYC,OAAO,IAGvEC,OAAOC,aAAeD,OAAOC,cAAgBD,OAAOE,mBAKpD,IAAIC,EAAU,KAEVC,GAAM,GACLC,UAAUC,UAAUC,MAAM,YAC1BF,UAAUC,UAAUC,MAAM,UAC1BF,UAAUC,UAAUC,MAAM,YAC7BH,GAAM,G,IA8nBOI,E,YAxnBb,WAAaC,GAAO,IAAD,8BACjB,4CAAMA,KAEDC,OAAS,CACZC,cAAUC,EACVC,iBAAaD,EACbE,WAAW,EACXC,MAAM,EACNC,iBAAaJ,EACbK,iBAAaL,EACbM,kBAAcN,EACdO,MAAM,GAGR,EAAKC,MAAQ,CACXC,UAAW,EACXC,gBAAiB,EACjBC,MAAO,EACPC,MAAO,EACPC,UAAW,IACXC,UAAW,EACXC,cAAe,EACfC,eAAgB,EAChBC,WAAY,GACZC,eAAgB,YAChBC,cAAe,SACfC,cAAe,aAGjB,EAAKC,SAAW,EAAKA,SAASC,KAAd,gBAChB,EAAKC,kBAAoB,EAAKA,kBAAkBD,KAAvB,gBACzB,EAAKE,SAAW,EAAKA,SAASF,KAAd,gBAChB,EAAKG,kBAAoB,EAAKA,kBAAkBH,KAAvB,gBACzB,EAAKI,kBAAoB,EAAKA,kBAAkBJ,KAAvB,gBACzB,EAAKK,iBAAmB,EAAKA,iBAAiBL,KAAtB,gBACxB,EAAKM,mBAAqB,EAAKA,mBAAmBN,KAAxB,gBAC1B,EAAKO,WAAa,EAAKA,WAAWP,KAAhB,gBAClB,EAAKQ,YAAc,EAAKA,YAAYR,KAAjB,gBACnB,EAAKS,YAAc,EAAKA,YAAYT,KAAjB,gBACnB,EAAKU,aAAe,EAAKA,aAAaV,KAAlB,gBACpB,EAAKW,WAAa,EAAKA,WAAWX,KAAhB,gBAxCD,E,+EA4CDY,GACZ3C,IAAWA,EAAQ4C,aAAc5C,EAAQ6C,MAAO7C,EAAU,MAC9DV,EAASwD,U,0CAITxD,EAAW,IAAIO,OAAOC,aACtBP,EAAWD,EAASyD,aACpBlD,OAAOmD,iBAAiB,gBAAiBC,KAAKjB,qB,6CAI9CnC,OAAOqD,oBAAoB,gBAAiBD,KAAKjB,qB,+BAGzC,IAaJmB,EAMAC,EAMAC,EAxBGpB,EAEsEgB,KAFtEhB,SACAC,EACsEe,KADtEf,kBAAmBC,EACmDc,KADnDd,kBAAmBE,EACgCY,KADhCZ,mBACtCD,EAAsEa,KAAtEb,iBAAkBE,EAAoDW,KAApDX,WAAyBE,GAA2BS,KAAxCV,YAAwCU,KAA3BT,aAAaE,EAAcO,KAAdP,WAHxD,EAOEO,KAAKhC,MAHPC,EAJA,EAIAA,UAAWC,EAJX,EAIWA,gBAAiBC,EAJ5B,EAI4BA,MAAOC,EAJnC,EAImCA,MACnCC,EALA,EAKAA,UAAWC,EALX,EAKWA,UAAWC,EALtB,EAKsBA,cAAeC,EALrC,EAKqCA,eACrCC,EANA,EAMAA,WAAYC,EANZ,EAMYA,eAAgBC,EAN5B,EAM4BA,cAAeC,EAN3C,EAM2CA,cAG9CyB,EAAW,EAsBf,YArBgC7C,IAA5BwC,KAAK1C,OAAOG,cACb4C,EAAWL,KAAK1C,OAAOG,YAAY4C,UAIpCH,EADqB,UAAnBxB,EACY,CAAC4B,MAAO,SAER,GAIdH,EADoB,aAAlBxB,EACW,CAAC2B,MAAO,SAER,GAIbF,EADoB,gBAAlBxB,EACW,CAAC0B,MAAO,SAER,GAGb,yBAAKC,UAAU,OAAf,oCACiC,6BADjC,0BAGA,6BAHA,gCAI6B,6BAC3B,0BAAMA,UAAU,cAChB,2BAAOC,KAAK,OAAOC,KAAK,WACxBC,OAAO,UAAUC,SAAU3B,IAAY,8BAEzC,6BATA,aAWWX,EAXX,IAWsB,6BACpB,0BAAMkC,UAAU,UACf,sCACG,2BAAOC,KAAK,QAAQC,KAAK,cAAcG,IAAI,KAAKC,IAAI,MACvDC,MAASzC,EAAWsC,SAAU1B,IAF9B,QAKH,6BAlBA,4BAmB0BX,EAnB1B,IAmBqC,6BACnC,0BAAMiC,UAAU,UACf,sCACG,2BAAOC,KAAK,QAAQC,KAAK,kBAAkBG,IAAI,MAAMC,IAAI,KAC5DC,MAASvC,EAAeoC,SAAUzB,IAFlC,KAEyD,6BAFzD,OAGI,2BAAOsB,KAAK,QAAQC,KAAK,mBAAmBG,IAAI,OAAOC,IAAI,MAC/DC,MAAStC,EAAgBmC,SAAUzB,IAJnC,MAI2D,+BAI9D,6BA7BA,SA8BS6B,KAAKC,MAAM/C,GAAW,6BAC7B,0BAAMsC,UAAU,UAChB,oCACC,2BAAOC,KAAK,QAAQC,KAAK,aAC1BG,IAAI,IAAIC,IAAKR,EACbS,MAAS5C,EAAiB+C,KAAK,IAC/BN,SAAUxB,IACT4B,KAAKC,MAAMX,GAAU,8BAEtB,4BAAQI,KAAK,OAAOS,QAASzB,GAA7B,QARA,KASGsB,KAAKC,MAAY,GAAN7C,GAAU,GATxB,YAUA,4BAAQsC,KAAK,OAAOS,QAASzB,GAA7B,QAVA,KAWGsB,KAAKC,MAAY,GAAN5C,GAAU,IAExB,6BA5CF,WA6CSK,EAAW,6BAClB,0BAAM8B,UAAU,UACf,oCACC,2BAAOC,KAAK,QAAQC,KAAK,eAAeG,IAAI,IAAIC,IAAI,MACrDC,MAASrC,EAAYkC,SAAUvB,IAF/B,MAEwD,+BAG3D,6BAEA,oCACK,4BAAQqB,KAAK,aAAaS,QAAS7B,EAAY8B,MAAOjB,GACxDxB,GAFH,YAIE,4BAAQ+B,KAAK,SAASS,QAASzB,EAAY0B,MAAOhB,GACjDxB,GALH,YAME,4BAAQ8B,KAAK,QAAQS,QAASzB,GAA9B,WANF,IAQY,6BARZ,MASK,4BAAQgB,KAAK,OAAOS,QAAS3B,EAAa4B,MAAOf,GACnDxB,GAVH,mCAaA,6BAnEA,YAoEYrC,EApEZ,SAqEE,uBAAG6E,KAnLM,kDAoLRC,OAAO,SAASC,IAAI,uBADrB,oB,+BASI5B,GAET,GAA0B,aAAtBA,EAAM2B,OAAOZ,MACiB,IAA9Bf,EAAM2B,OAAOE,MAAMC,SACnBxB,KAAK1C,OAAOI,UAAhB,CAEAsC,KAAKnB,SAAS,CAAC4C,UAAW,IAC1BzB,KAAKnB,SAAS,CAACH,eAAgB,cAC/B,IAAIgD,EAAOhC,EAAM2B,OAAOE,MAAM,GAC9BvB,KAAK1C,OAAOC,SAAWmE,EAAKjB,KAE5B,IAAIkB,EAAS,IAAIC,WAEjBD,EAAOE,OAAS,SAAUC,GAEvBzF,EAAS0F,gBAAgBJ,EAAOK,OAC9B,SAASvE,GACPuC,KAAK1C,OAAOG,YAAcA,EAC1BuC,KAAKnB,SAAS,CAACH,eAAgB,YAC5BT,UAAW,EAAGC,gBAAiB,IAClC8B,KAAKnB,SAAS,CAACV,MAAO,IACtB6B,KAAKnB,SAAS,CAACT,MAAOX,EAAY4C,YAClCvB,KAAKkB,OACP,SAAUiC,GAASC,QAAQC,IAAK,qBAAuBF,EAAMG,SAEhEtD,KAAKkB,MAEP2B,EAAOU,kBAAkBX,M,wCAKRhC,GACfwC,QAAQC,IAAI,qBACc,gBAAtBzC,EAAM2B,OAAOZ,OACb1D,IAASA,EAAQuF,MAAQ5C,EAAM2B,OAAOP,MAAM,KAChDd,KAAKnB,SAAS,CAACR,UAAWqB,EAAM2B,OAAOP,W,wCAGxBpB,GAGf,IAAI6C,EAFJL,QAAQC,IAAI,qBAIc,oBAAtBzC,EAAM2B,OAAOZ,OACf8B,EAA+B,EAAnB7C,EAAM2B,OAAOP,MAAYd,KAAKhC,MAAMQ,eAAe,IAC/DwB,KAAKnB,SAAS,CAACN,cAAemB,EAAM2B,OAAOP,SAGnB,qBAAtBpB,EAAM2B,OAAOZ,OACf8B,EAAqC,EAAzBvC,KAAKhC,MAAMO,cAAoBmB,EAAM2B,OAAOP,MAAM,IAC9Dd,KAAKnB,SAAS,CAACL,eAAgBkB,EAAM2B,OAAOP,SAG1C/D,IACFA,EAAQyF,MAAQzB,KAAK0B,IAAI,EAAKF,EAAU,KAG1CvC,KAAKnB,SAAS,CAACP,UAAWiE,M,uCAIZ7C,GAGd,GAFAwC,QAAQC,IAAI,oBAEc,eAAtBzC,EAAM2B,OAAOZ,MAEiB,cAA9BT,KAAKhC,MAAMU,eAAgC,CAC5C,IAAIoC,EAAQpB,EAAM2B,OAAOP,MACzBd,KAAKnB,SAAS,CAACZ,UAAW6C,IAC1Bd,KAAKnB,SAAS,CAACX,gBAAiB4C,O,yCAInBpB,GAChB,GAA0B,iBAAtBA,EAAM2B,OAAOZ,KAAjB,CACA,IAAIiC,EAAyB,EAAnBhD,EAAM2B,OAAOP,MACvBxE,EAASqG,KAAK7B,MAAQ4B,EAAI,IAC1B1C,KAAKnB,SAAS,CAACJ,WAAYiE,O,iCAGnBhD,GAAQ,IAAD,OACRjC,EAAeuC,KAAK1C,OAApBG,YAGT,GAAIT,EAAI,CACN,IAAI4F,EAASvG,EAASwG,aAAa,EAAE,EAAE,OACnCC,EAASzG,EAAS0G,qBACtBD,EAAOF,OAASA,EAChBE,EAAOE,QAAS3G,EAAS4G,aACzBH,EAAOI,QAKT,GAA0B,eAAtBxD,EAAM2B,OAAOZ,MACS,WAAtBf,EAAM2B,OAAOZ,UADjB,CAGE,IAAItC,EAAQ6B,KAAKhC,MAAMG,MACnBC,EAAQ4B,KAAKhC,MAAMI,MAOvB,GANIA,GAASD,IACXC,EAAQD,EAAQ,GAChB6B,KAAKnB,SAAS,CAACT,MAAOA,KAIU,UAA9B4B,KAAKhC,MAAMU,eAA2B,CACxC,IAAKsB,KAAK1C,OAAOI,UAAW,OAE5B,GAAgB,OAAZX,EAAkB,OAStB,OAPAA,EAAQ4C,aAAc5C,EAAQ6C,MAAO7C,EAAU,KAC/CiD,KAAK1C,OAAOI,WAAY,EAExBsC,KAAKnB,SAAS,CAACV,MAAO6B,KAAKhC,MAAMC,YACjC+B,KAAKnB,SAAS,CAACX,gBAAiB8B,KAAKhC,MAAMC,iBAC3C+B,KAAKnB,SAAS,CAACH,eAAgB,cAMjC,GAA0B,eAAtBgB,EAAM2B,OAAOZ,MACkB,cAA9BT,KAAKhC,MAAMU,eAAgC,CAC9C,GAAIsB,KAAK1C,OAAOI,UAAW,OAC3BU,EAAQX,EAAY4C,SAIvB,GAAkC,cAA9BL,KAAKhC,MAAMU,gBACTsB,KAAKhC,MAAML,KAAM,CACrBuE,QAAQC,IAAK,UAAWhE,EAAOC,GAEhC,IAAI+E,EAAqB9G,EAASwG,aAAa,GACzCzE,EAAQD,GAAQV,EAAY2F,WAAY3F,EAAY2F,YACtDC,EAAQ5F,EAAY6F,eAAe,GACnCC,EAAQ9F,EAAY6F,eAAe,GAEvCD,EAAQA,EAAKG,SAASrF,EAAMV,EAAY2F,WAClChF,EAAMX,EAAY2F,YAGxB,IADA,IAAIK,EAAMN,EAAmBG,eAAe,GACnCI,EAAO,EAAGA,EAASL,EAAK7B,OAAQkC,IACtCD,EAAIC,GAAUL,EAAKK,GAGtB,GAAIjG,EAAYkG,kBAAoB,EAAG,CACrCF,EAAMN,EAAmBG,eAAe,GACxCC,EAAQA,EAAMC,SAASrF,EAAMV,EAAY2F,WACxChF,EAAMX,EAAY2F,YAEnB,IAAK,IAAIM,EAAO,EAAGA,EAASH,EAAM/B,OAAQkC,IACxCD,EAAIC,GAAUH,EAAMG,GAuCxB,OAnCI3G,IAAWA,EAAQ4C,aAAc5C,EAAQ6C,MAAO7C,EAAS,OAE7DA,EAAU,IAAI6G,IAAavH,EAAU8G,EAAoB,OACjDb,MAAQtC,KAAKhC,MAAMK,UAAU,IACrCtB,EAAQyF,MAAQzB,KAAK0B,IAAI,EAAIzC,KAAKhC,MAAMM,UAAU,IAElDvB,EAAQ8G,GAAG,QAAQ,SAAAC,GAEjB,IAAIC,EAAWC,WAAW7F,GAAS6F,WAAWF,EAAOG,YAErD,EAAKpF,SAAS,CAACZ,UAAW8F,IACrB/G,GAAK,EAAK6B,SAAS,CAACX,gBAAiB6F,IAEtCD,EAAOI,kBAAoB,MAC7BnH,EAAQ4C,aACR5C,EAAQ6C,MACR7C,EAAU,KACV,EAAKO,OAAOI,WAAY,EACpB,EAAKJ,OAAOK,MACd,EAAK0B,WAAW,CAACgC,OAAQ,CAACZ,KAAM,YACA,UAA9B,EAAKzC,MAAMU,gBACb,EAAKG,SAAS,CAACH,eAAgB,kBAKrCsB,KAAK1C,OAAOI,WAAY,EACxBX,EAAQiG,QAAQ1G,GAChBA,EAAS0G,QAAQ3G,EAAS4G,aAEA,eAAtBvD,EAAM2B,OAAOZ,MACoB,cAA9BT,KAAKhC,MAAMU,gBACTsB,KAAKnB,SAAS,CAACH,eAAgB,eAExCwD,QAAQC,IAAK,mB,kCAWJzC,GAAQ,IAEXjC,EAAeuC,KAAK1C,OAApBG,YAEP,IAAIuC,KAAKhC,MAAMmG,SAAf,CAEAjC,QAAQC,IAAK,eAEb,IAAIiC,EAAaC,SAAS5G,EAAY+D,QAAQ,IAAMxB,KAAKhC,MAAMK,YACzDiG,EAAa,IAAIC,oBACpB9G,EAAYkG,iBAAkBS,EAC9B3G,EAAY2F,aAoBfrG,EAAU,IAAI6G,IAAaU,EAAY7G,EAAa,MAC5C6E,MAAQtC,KAAKhC,MAAMK,UAAU,IACrCtB,EAAQyF,MAAQzB,KAAK0B,IAAI,EAAIzC,KAAKhC,MAAMM,UAAU,IAClD0B,KAAK1C,OAAOI,WAAY,EAExB4G,EAAWE,WAAa,SAAS1C,GAC/BI,QAAQC,IAAI,sCAAuCL,EAAE2C,gBACrD,IAAI3B,EAASzG,EAAS0G,qBACtBD,EAAOF,OAASd,EAAE2C,eAClB3B,EAAOE,QAAQ3G,EAAS4G,aACxBH,EAAOI,SAGTnG,EAAQiG,QAAQsB,EAAWrB,aAC3BqB,EAAWI,iBACXxC,QAAQC,IAAI,kB,mCAID1E,GACXyE,QAAQC,IAAI,gBAEZ,IACIwC,EADU3E,KAAK1C,OAAOC,SAASqH,MAAM,KAE9B,GACN,KAAOP,SAASrE,KAAKhC,MAAMK,WAC3B,KAAOgG,SAA8B,IAArBrE,KAAKhC,MAAMM,WAC3B,OACDuG,EAAO,IAAIC,KAAK,CAACC,EAAMtH,IAAe,CAAC+C,KAAM,kBACjDwE,iBAAOH,EAAKF,GAEZzC,QAAQC,IAAI,mBAAoBwC,K,kCAGtBjF,GAAQ,IAAD,OAGjB,GAFAwC,QAAQC,IAAK,eAEa,SAAtBzC,EAAM2B,OAAOZ,KAAjB,CAHiB,IAKVhD,EAAeuC,KAAK1C,OAApBG,YAEP,GAAiC,gBAA7BuC,KAAKhC,MAAMY,cAOb,OANA7B,EAAQ4C,aACR5C,EAAQ6C,MACR7C,EAAU,KACViD,KAAK1C,OAAOI,WAAY,EACxBsC,KAAKnB,SAAS,CAACD,cAAe,mBAC9BsD,QAAQC,IAAK,4BAIf,GAAiC,cAA7BnC,KAAKhC,MAAMY,gBAEfsD,QAAQC,IAAK,yBAA0B,UAAWnC,KAAK1C,OAAOI,YAE1DsC,KAAK1C,OAAOI,WAAhB,CAGD,GAAIV,EAAI,CACN,IAAI4F,EAASvG,EAASwG,aAAa,EAAE,EAAE,OACnCC,EAASzG,EAAS0G,qBACtBD,EAAOF,OAASA,EAChBE,EAAOE,QAAS3G,EAAS4G,aACzBH,EAAOI,QAOR,IAAI+B,EAAY,KAEZC,EAAWzH,EAAYkG,iBAO3B,GALI5G,IAAWA,EAAQ4C,aAAc5C,EAAQ6C,MAAO7C,EAAS,OAC7DA,EAAU,IAAI6G,IAAavH,EAAUoB,EAJpB,OAKT6E,MAAQtC,KAAKhC,MAAMK,UAAU,IACrCtB,EAAQyF,MAAQzB,KAAK0B,IAAI,EAAIzC,KAAKhC,MAAMM,UAAU,IAE9CjC,EAAS8I,qBACXF,EAAY5I,EAAS8I,qBATN,KASsCD,EAASA,OACzD,KAAI7I,EAAS+I,sBAIlB,YADAlD,QAAQC,IAAK,iCAFb8C,EAAY5I,EAAS+I,sBAXN,KAWuCF,EAASA,GAQjElF,KAAK1C,OAAOQ,aAAezB,EAASwG,aAClCqC,EACAb,SAAS5G,EAAY+D,QAAQ,IAAIxB,KAAKhC,MAAMK,YAC5CZ,EAAY2F,YACdpD,KAAK1C,OAAOM,YAAc,IAAIyH,aAAarF,KAAK1C,OAAOQ,aAAa0D,QACpExB,KAAK1C,OAAOO,YAAc,IAAIwH,aAAarF,KAAK1C,OAAOQ,aAAa0D,QAEpExB,KAAK1C,OAAOS,MAAO,EAGnB,IAAIuH,EAAQ,EACZL,EAAUM,eAAiB,SAAS7F,GAIlC,IAHA,IAAI8F,EAAc9F,EAAM8F,YACpBC,EAAe/F,EAAM+F,aAEhBC,EAAU,EAAGA,EAAUF,EAAY7B,iBAAkB+B,IAI5D,IAHC,IAAIC,EAAYH,EAAYlC,eAAeoC,GACvCE,EAAaH,EAAanC,eAAeoC,GAErChC,EAAS,EAAGA,EAAS8B,EAAYhE,OAAQkC,IAChDkC,EAAWlC,GAAUiC,EAAUjC,GACf,IAAZgC,EACD1F,KAAK1C,OAAOM,YAAY0H,EAAQ5B,GAAUiC,EAAUjC,GAEpD1D,KAAK1C,OAAOO,YAAYyH,EAAQ5B,GAAUiC,EAAUjC,GAI3D4B,GAASE,EAAYhE,QAErB1C,KAAKkB,MAEPjD,EAAQ8G,GAAG,QAAQ,SAAAC,GACjB,IAAIC,EAAUC,WAAWF,EAAOG,YAIhC,GAHA,EAAKpF,SAAS,CAACZ,UAAW8F,IACrB/G,GAAK,EAAK6B,SAAS,CAACX,gBAAiB6F,IAEtCD,EAAOI,kBAAoB,IAAK,CAChCnH,EAAQ4C,aAAc5C,EAAQ6C,MAAO7C,EAAU,KASlD,IADA,IAAI0G,EAAM,EAAKnG,OAAOQ,aAAawF,eAAe,GACzCI,EAAO,EAAGA,EAAS,EAAKpG,OAAOM,YAAY4D,OAAQkC,IACxDD,EAAIC,GAAU,EAAKpG,OAAOM,YAAY8F,GAE1C,GAAI,EAAKpG,OAAOQ,aAAa6F,kBAAoB,EAAG,CACnDF,EAAM,EAAKnG,OAAOQ,aAAawF,eAAe,GAC9C,IAAK,IAAII,EAAO,EAAGA,EAAS,EAAKpG,OAAOO,YAAY2D,OAAQkC,IACzDD,EAAIC,GAAU,EAAKpG,OAAOO,YAAY6F,GAGxC,EAAKlE,aAAa,EAAKlC,OAAOQ,cAC9B,EAAKR,OAAOS,MAAO,EACnB,EAAKc,SAAS,CAACD,cAAe,cAC9B,EAAKtB,OAAOI,WAAY,MAK7BsC,KAAK1C,OAAOI,WAAY,EACxBX,EAAQiG,QAAQiC,GAChBA,EAAUjC,QAAQ1G,GAClBA,EAAS0G,QAAQ3G,EAAS4G,aAE1BjD,KAAKnB,SAAS,CAACD,cAAe,gBAC9BsD,QAAQC,IAAK,kC,iCAKJzC,GAcT,GAbAwC,QAAQC,IAAK,cAEa,SAAtBzC,EAAM2B,OAAOZ,OACfT,KAAKnB,SAAU,CAACV,MAAO6B,KAAKhC,MAAMC,YAClC+B,KAAKnB,SAAU,CAACX,gBAAiB8B,KAAKhC,MAAMC,aAEpB,SAAtByB,EAAM2B,OAAOZ,OACXT,KAAKhC,MAAMC,WAAc+B,KAAKhC,MAAMG,MACtC6B,KAAKnB,SAAU,CAACT,MAAO4F,WAAWhE,KAAKhC,MAAMC,aAE7C+B,KAAKnB,SAAU,CAACT,MAAO4F,WAAWhE,KAAKhC,MAAMG,OAAS6F,WAAW,OAG3C,WAAtBtE,EAAM2B,OAAOZ,KAEf,GAAiC,WAA7BT,KAAKhC,MAAMW,cAA2B,CAGxC,GAFAuD,QAAQC,IAAK,qBAAsB,UAAWnC,KAAK1C,OAAOI,WAEtDsC,KAAK1C,OAAOI,UAAW,OAEvBX,IACFA,EAAQ4C,aACR5C,EAAQ6C,OAGVI,KAAKnB,SAAU,CAACF,cAAe,aAC/BqB,KAAK1C,OAAOK,MAAO,EACnBqC,KAAKX,WAAW,CAACgC,OAAQ,CAACZ,KAAM,iBAG7B,GAAiC,aAA7BT,KAAKhC,MAAMW,cAA6B,CAG/C,GAFAuD,QAAQC,IAAK,uBACJ,UAAWnC,KAAK1C,OAAOI,YAC3BsC,KAAK1C,OAAOI,UAAW,OAExBX,IACFA,EAAQ4C,aACR5C,EAAQ6C,MACR7C,EAAU,MAGZiD,KAAK1C,OAAOK,MAAO,EACnBqC,KAAK1C,OAAOI,WAAY,EACxBsC,KAAKnB,SAAU,CAACF,cAAe,WAKnC,GAA0B,UAAtBe,EAAM2B,OAAOZ,KAWjB,OAVEyB,QAAQC,IAAK,qBAETpF,IAAWA,EAAQ4C,aAAc5C,EAAQ6C,MAAO7C,EAAU,MAC9DiD,KAAKnB,SAAS,CAACH,eAAgB,YAC3BT,UAAW,EAAGE,MAAO,EAAGC,MAAO4B,KAAK1C,OAAOG,YAAY4C,WAE3DL,KAAK1C,OAAOK,MAAO,EACnBqC,KAAK1C,OAAOI,WAAY,OACxBsC,KAAKnB,SAAU,CAACF,cAAe,e,GAlnBnBkH,aCfEC,QACW,cAA7BlJ,OAAOmJ,SAASC,UAEe,UAA7BpJ,OAAOmJ,SAASC,UAEhBpJ,OAAOmJ,SAASC,SAAS7I,MACvB,2DCZN8I,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBnJ,WACrBA,UAAUoJ,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,iB","file":"static/js/main.9f7f7cb9.chunk.js","sourcesContent":["import React, { Component } from 'react';\n// import logo from './logo.svg';\nimport './App.css';\nimport {PitchShifter} from 'soundtouchjs'\nimport packageJSON from '../package.json'\nimport {saveAs} from 'file-saver';\nimport * as toWav from 'audiobuffer-to-wav';\n// import {fetch as fetchPolyfill} from 'whatwg-fetch';\n\nconst version = (packageJSON.homepage + packageJSON.subversion).slice(-10)\nconst homepage = 'https://goto920.github.io/demos/variableplayer/'\n\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext\n\nvar audioCtx;\nvar gainNode;\n// =  audioCtx.createGain()\nvar shifter = null // null\n\nvar iOS = false;\nif(  navigator.userAgent.match(/iPhone/i) \n  || navigator.userAgent.match(/iPod/i)\n  || navigator.userAgent.match(/iPad/i)){\n  iOS = true;\n}\n\n\nclass App extends Component {\n\n  constructor (props){\n    super(props)\n\n    this.params = {\n      filename: undefined,\n      audioBuffer: undefined,\n      isPlaying: false,\n      loop: false,\n      exportDataL: undefined,\n      exportDataR: undefined,\n      exportBuffer: undefined,\n      save: false\n    }\n\n    this.state = {\n      playingAt: 0,\n      playingAtSlider: 0,\n      timeA: 0,\n      timeB: 0,\n      playSpeed: 100, // in percent\n      playPitch: 0, // in semi-tone unit (real value)\n      playPitchSemi: 0, // in semi-tone (integer part)\n      playPitchCents: 0, // percent for one semitone\n      playVolume: 80, // in percent\n      startButtonStr: 'loadFile!', \n      loopButtonStr: 'LoopAB',\n      saveButtonStr: 'ExportWav'\n    }\n\n    this.setState = this.setState.bind(this)\n    this.handleWindowClose = this.handleWindowClose.bind(this)\n    this.loadFile = this.loadFile.bind(this)\n    this.handleSpeedSlider = this.handleSpeedSlider.bind(this)\n    this.handlePitchSlider = this.handlePitchSlider.bind(this)\n    this.handleTimeSlider = this.handleTimeSlider.bind(this)\n    this.handleVolumeSlider = this.handleVolumeSlider.bind(this)\n    this.handlePlay = this.handlePlay.bind(this);\n    this.handleSaveA = this.handleSaveA.bind(this);\n    this.handleSaveB = this.handleSaveB.bind(this);\n    this.fakeDownload = this.fakeDownload.bind(this);\n    this.handleLoop = this.handleLoop.bind(this);\n    \n  } // end constructor\n\n  handleWindowClose(event) { \n    if (shifter) { shifter.disconnect(); shifter.off(); shifter = null; }\n    audioCtx.close();\n  }\n\n  componentDidMount () { // after render()\n    audioCtx = new window.AudioContext()\n    gainNode = audioCtx.createGain()\n    window.addEventListener('beforeClosing', this.handleWindowClose)\n  }\n\n  componentWillUnmount () { // before closing app\n    window.removeEventListener('beforeClosing', this.handleWindowClose)\n  }\n\n  render() {\n    const {loadFile, \n           handleSpeedSlider, handlePitchSlider, handleVolumeSlider, \n           handleTimeSlider, handlePlay, handleSaveA, handleSaveB, handleLoop} = this\n    const {playingAt, playingAtSlider, timeA, timeB,\n           playSpeed, playPitch, playPitchSemi, playPitchCents,\n           playVolume, startButtonStr, loopButtonStr, saveButtonStr} \n           = this.state\n\n    let duration = 0;\n    if (this.params.audioBuffer !== undefined) \n       duration = this.params.audioBuffer.duration\n\n    let startBStyle; \n    if (startButtonStr === 'Pause')\n      startBStyle = {color: 'green'}\n    else  \n      startBStyle = {}\n\n    let loopBStyle; \n    if (loopButtonStr === 'StopLoop')\n      loopBStyle = {color: 'green'}\n    else  \n      loopBStyle = {}\n\n    let saveBStyle; \n    if (saveButtonStr === 'AbortExport')\n      saveBStyle = {color: 'green'}\n    else  \n      saveBStyle = {}\n\n    return (\n      <div className=\"App\">\n      Variable speed/pitch audio player<br /> \n      with soundtouchjs by KG\n      <hr />\n      1) Input Audio (local file): <br />\n        <span className='selectFile'>\n        <input type='file' name='loadFile' \n        accept='audio/*' onChange={loadFile} /><br />\n        </span>\n      <hr />\n\n      Speed(%): {playSpeed} <br />\n        <span className='slider'> \n         <center>\n         025<input type='range' name='speedSlider' min='25' max='200'\n         value = {playSpeed} onChange={handleSpeedSlider} />200 \n         </center>\n        </span>\n      <hr />\n      Pitch (semi-tone.cents): {playPitch} <br />\n        <span className='slider'> \n         <center>\n         -12<input type='range' name='pitchSliderSemi' min='-12' max='12'\n         value = {playPitchSemi} onChange={handlePitchSlider} />12<br />\n         -100<input type='range' name='pitchSliderCents' min='-100' max='100'\n         value = {playPitchCents} onChange={handlePitchSlider} />100<br />\n         </center>\n\n        </span>\n      <hr />\n        Time: {Math.round(playingAt)}<br />\n        <span className='slider'> \n        <center>\n        0<input type='range' name='timeSlider'\n        min='0' max={duration}\n        value = {playingAtSlider} step='1'\n        onChange={handleTimeSlider} />\n        {Math.round(duration)}<br />\n        </center>\n        <button name='setA' onClick={handleLoop} >setA</button>\n        : {Math.round(timeA*10)/10} &nbsp;&nbsp;\n        <button name='setB' onClick={handleLoop} >setB</button>\n        : {Math.round(timeB*10)/10}\n        </span>\n        <hr />\n      Volume: {playVolume}<br />\n        <span className='slider'> \n         <center>\n         0<input type='range' name='volumeSlider' min='0' max='150'\n         value = {playVolume} onChange={handleVolumeSlider} />150<br />\n         </center>\n        </span>\n      <hr />\n\n      <span>\n        2) <button name='startPause' onClick={handlePlay} style={startBStyle}> \n        {startButtonStr}\n        </button> &nbsp;&nbsp;\n        <button name='LoopAB' onClick={handleLoop} style={loopBStyle}>\n        {loopButtonStr}</button> &nbsp;&nbsp;\n        <button name='reset' onClick={handleLoop}> \n        ResetAB\n        </button> <hr />\n        3) <button name='save' onClick={handleSaveB} style={saveBStyle}> \n        {saveButtonStr}\n        </button> (At playback speed, vol. 100%)\n      </span>\n      <hr />\n        Version: {version}, &nbsp;\n        <a href={homepage} \n         target=\"_blank\" rel=\"noopener noreferrer\">Manual/Update</a>\n      </div>\n    ) // end return\n\n  } // end render()\n\n///////////////////////////////////////////////////\n\n  loadFile (event) {\n\n   if (event.target.name !== 'loadFile') return;\n   if (event.target.files.length === 0) return;\n   if (this.params.isPlaying) return;\n\n   this.setState({totalTime: 0})\n   this.setState({startButtonStr: 'loadFile!'})\n   let file = event.target.files[0]\n   this.params.filename = file.name;\n\n   let reader = new FileReader()\n\n   reader.onload = function (e) {\n\n      audioCtx.decodeAudioData(reader.result, \n        function(audioBuffer) {\n          this.params.audioBuffer = audioBuffer\n          this.setState({startButtonStr: 'PlayFromA', \n             playingAt: 0, playingAtSlider: 0})\n          this.setState({timeA: 0})\n          this.setState({timeB: audioBuffer.duration})\n        }.bind(this),\n        function (error) { console.log (\"Filereader error: \" + error.err) })\n\n   }.bind(this)\n\n   reader.readAsArrayBuffer(file)\n\n } // end loadFile()\n\n// UI handlers\n  handleSpeedSlider(event) { \n     console.log('handleSpeedSlider');\n     if (event.target.name !== 'speedSlider') return\n     if (shifter) shifter.tempo = event.target.value/100.0\n     this.setState({playSpeed: event.target.value})\n  }\n\n  handlePitchSlider(event) { \n     console.log('handlePitchSlider');\n\n     let pitchSemi;\n\n     if (event.target.name === 'pitchSliderSemi' ){\n       pitchSemi = event.target.value*1.0 + this.state.playPitchCents/100.0\n       this.setState({playPitchSemi: event.target.value})\n     } \n\n     if (event.target.name === 'pitchSliderCents' ){\n       pitchSemi = this.state.playPitchSemi*1.0 + event.target.value/100.0\n       this.setState({playPitchCents: event.target.value})\n     }\n\n     if (shifter) {\n       shifter.pitch = Math.pow(2.0, pitchSemi/12.0)\n     }\n\n     this.setState({playPitch: pitchSemi})\n\n  }\n\n  handleTimeSlider(event) { \n     console.log('handleTimeSlider');\n\n     if (event.target.name !== 'timeSlider') return\n\n     if (this.state.startButtonStr === 'PlayFromA') {\n        let value = event.target.value;\n        this.setState({playingAt: value});\n        this.setState({playingAtSlider: value});\n     }\n  }\n\n  handleVolumeSlider(event) { \n     if (event.target.name !== 'volumeSlider') return\n     let vol = event.target.value*1.0\n     gainNode.gain.value = vol/100.0\n     this.setState({playVolume: vol})\n  }\n\n  handlePlay(event) { \n     const {audioBuffer} = this.params;\n\n// Unlock iOS \n   if (iOS){\n     let buffer = audioCtx.createBuffer(1,1,44100); \n     let source = audioCtx.createBufferSource();\n     source.buffer = buffer;\n     source.connect (audioCtx.destination);\n     source.start();\n   }\n// End unlock\n\n// startPause or LoopAB\n   if (event.target.name === 'startPause' \n    || event.target.name === 'LoopAB') {\n\n     let timeA = this.state.timeA;\n     let timeB = this.state.timeB;\n     if (timeB <= timeA) {\n       timeB = timeA + 10;\n       this.setState({timeB: timeB});\n     }\n\n// Pause\n     if (this.state.startButtonStr === 'Pause'){\n       if (!this.params.isPlaying) return;\n\n       if (shifter === null) return\n\n       shifter.disconnect(); shifter.off(); shifter = null;\n       this.params.isPlaying = false;\n\n       this.setState({timeA: this.state.playingAt});\n       this.setState({playingAtSlider: this.state.playingAt});\n       this.setState({startButtonStr: 'PlayFromA' })\n\n       return;\n     } // end pause \n\n// PlayFromA\n     if (event.target.name === 'startPause' \n       && this.state.startButtonStr === 'PlayFromA') {\n       if (this.params.isPlaying) return;\n       timeB = audioBuffer.duration;\n     }\n\n// PlayFromA/LoopAB\n    if (this.state.startButtonStr === 'PlayFromA'\n       || this.state.loop) {\n      console.log ('Play AB', timeA, timeB);\n\n     let partialAudioBuffer = audioCtx.createBuffer(2,\n          (timeB - timeA) *audioBuffer.sampleRate, audioBuffer.sampleRate);\n     let left  = audioBuffer.getChannelData(0);\n     let right = audioBuffer.getChannelData(1);\n\n     left  = left.subarray(timeA*audioBuffer.sampleRate, \n           timeB*audioBuffer.sampleRate);\n\n     let tmp = partialAudioBuffer.getChannelData(0);\n     for (let sample=0; sample < left.length; sample++) \n        tmp[sample] = left[sample];\n         //partialAudioBuffer.copyToChannel(left,0,0);\n\n     if (audioBuffer.numberOfChannels >= 2) {\n       tmp = partialAudioBuffer.getChannelData(1);\n       right = right.subarray(timeA*audioBuffer.sampleRate, \n        timeB*audioBuffer.sampleRate);\n\n       for (let sample=0; sample < right.length; sample++) \n         tmp[sample] = right[sample];\n        // partialAudioBuffer.copyToChannel(right,1,0);\n     }\n\n     if (shifter) { shifter.disconnect(); shifter.off(); shifter= null;}\n\n     shifter = new PitchShifter(audioCtx, partialAudioBuffer, 4096)\n     shifter.tempo = this.state.playSpeed/100.0\n     shifter.pitch = Math.pow(2.0,this.state.playPitch/12.0)\n\n     shifter.on('play', detail => {\n\n       let setTime =  parseFloat(timeA) + parseFloat(detail.timePlayed);\n          \n       this.setState({playingAt: setTime}); \n       if (!iOS) this.setState({playingAtSlider: setTime}); \n\n       if (detail.percentagePlayed >= 100) {\n         shifter.disconnect();\n         shifter.off(); \n         shifter = null;\n         this.params.isPlaying = false;\n         if (this.params.loop) \n           this.handlePlay({target: {name: 'LoopAB'}});\n         if (this.state.startButtonStr === 'Pause') \n           this.setState({startButtonStr: 'PlayFromA'});\n       }\n\n     }); // end shifter.on\n \n     this.params.isPlaying = true; \n     shifter.connect(gainNode);\n     gainNode.connect(audioCtx.destination);\n\n     if (event.target.name === 'startPause' \n         && this.state.startButtonStr === 'PlayFromA') \n              this.setState({startButtonStr: 'Pause'});\n\n     console.log ('Play AB END');\n     return;\n   } // end playing\n\n    return;\n  }\n\n\n    return;\n  } // end handlePlay()\n\n  handleSaveA(event) { \n\n    const {audioBuffer} = this.params;\n\n    if (this.state.isPlayng) return;\n\n    console.log ('handleSaveA');\n\n    let outBufSize = parseInt(audioBuffer.length*(100.0/this.state.playSpeed));\n    const offlineCtx = new OfflineAudioContext(\n       audioBuffer.numberOfChannels, outBufSize,\n       audioBuffer.sampleRate);\n\n/*\n// render dummy data\n    let dummyData = audioCtx.createBuffer(audioBuffer.numberOfChannels,\n      outBufSize,audioBuffer.sampleRate); \n    let dummy = offlineCtx.createBufferSource();\n    dummy.buffer = dummyData;\n    dummy.connect(offlineCtx.destination);\n\n    offlineCtx.oncomplete = function(e) {\n      console.log('offline rendering complete:', \n        e.renderedBuffer);\n    }\n\n    dummy.start();\n    offlineCtx.startRendering();\n// end dummy \n*/\n\n    shifter = new PitchShifter(offlineCtx, audioBuffer, 512);\n    shifter.tempo = this.state.playSpeed/100.0;\n    shifter.pitch = Math.pow(2.0,this.state.playPitch/12.0);\n    this.params.isPlaying = true;\n\n    offlineCtx.oncomplete = function(e) {\n      console.log('offline shifter rendering complete:', e.renderedBuffer);\n      let source = audioCtx.createBufferSource();\n      source.buffer = e.renderedBuffer;\n      source.connect(audioCtx.destination);\n      source.start();\n    }\n\n    shifter.connect(offlineCtx.destination);\n    offlineCtx.startRendering();\n    console.log('handleSaveA');\n\n  }\n\n  fakeDownload(audioBuffer){\n    console.log('fakeDownload');\n\n    const words = this.params.filename.split('.');\n    let outFileName = \n         words[0]\n       + '&s' + parseInt(this.state.playSpeed)\n       + '&p' + parseInt(this.state.playPitch*100)\n       + '.wav';\n    let blob = new Blob([toWav(audioBuffer)], {type: 'audio/vnd.wav'});\n    saveAs(blob,outFileName);\n\n    console.log('fakeDownLoad end', outFileName);\n  }\n\n  handleSaveB(event) { \n    console.log ('handleSaveB');\n\n    if (event.target.name !== 'save') return;\n\n    const {audioBuffer} = this.params;\n\n    if (this.state.saveButtonStr === 'AbortExport') {\n      shifter.disconnect();\n      shifter.off(); \n      shifter = null;\n      this.params.isPlaying = false;\n      this.setState({saveButtonStr: 'ExportWav'});\n      console.log ('handleSaveB: AbortExport');\n      return;\n    }\n\n    if (this.state.saveButtonStr !== 'ExportWav') return;\n\n    console.log ('handleSaveB: ExportWav', 'playing', this.params.isPlaying);\n\n    if (this.params.isPlaying) return;\n\n// Unlock iOS \n   if (iOS){\n     let buffer = audioCtx.createBuffer(1,1,44100); \n     let source = audioCtx.createBufferSource();\n     source.buffer = buffer;\n     source.connect (audioCtx.destination);\n     source.start();\n   }\n// End unlock\n\n// https://www.gmass.co/blog/record-audio-mobile-web-page-ios-android/\n// https://developer.mozilla.org/en-US/docs/Web/API/ScriptProcessorNode/onaudioprocess\n\n    let saverNode = null;\n    let bufferSize = 4096;\n    let channels = audioBuffer.numberOfChannels;\n\n    if (shifter) { shifter.disconnect(); shifter.off(); shifter= null;}\n    shifter = new PitchShifter(audioCtx, audioBuffer, bufferSize);\n    shifter.tempo = this.state.playSpeed/100.0;\n    shifter.pitch = Math.pow(2.0,this.state.playPitch/12.0);\n\n    if (audioCtx.createJavaScriptNode) {\n      saverNode = audioCtx.createJavaScriptNode(bufferSize,channels,channels);\n    } else if (audioCtx.createScriptProcessor) {\n      saverNode = audioCtx.createScriptProcessor(bufferSize,channels,channels);\n    } else {\n      console.log ('createScript is not supported');\n      return;\n    }\n\n/* Storage */\n\n    this.params.exportBuffer = audioCtx.createBuffer( \n      channels, \n      parseInt(audioBuffer.length*(100/this.state.playSpeed)), \n      audioBuffer.sampleRate);\n    this.params.exportDataL = new Float32Array(this.params.exportBuffer.length);\n    this.params.exportDataR = new Float32Array(this.params.exportBuffer.length);\n\n    this.params.save = true;\n\n/* Script Processor */\n    let index = 0;\n    saverNode.onaudioprocess = function(event){\n      let inputBuffer = event.inputBuffer;\n      let outputBuffer = event.outputBuffer;\n\n      for (let channel = 0; channel < inputBuffer.numberOfChannels; channel++){\n         let inputData = inputBuffer.getChannelData(channel);\n         let outputData = outputBuffer.getChannelData(channel);\n\n        for (let sample = 0; sample < inputBuffer.length; sample++) {\n          outputData[sample] = inputData[sample];\n          if (channel === 0) \n             this.params.exportDataL[index + sample] = inputData[sample];\n          else \n             this.params.exportDataR[index + sample] = inputData[sample];\n        }\n      }\n\n      index += inputBuffer.length;\n\n    }.bind(this);\n\n    shifter.on('play', detail => {\n      let setTime = parseFloat(detail.timePlayed);\n      this.setState({playingAt: setTime}); \n      if (!iOS) this.setState({playingAtSlider: setTime}); \n\n      if (detail.percentagePlayed >= 100) {\n          shifter.disconnect(); shifter.off(); shifter = null;\n\n/* Safari does not implement copyToChannel() */\n/*\n          this.params.exportBuffer.copyToChannel(this.params.exportDataL,0,0)\n          this.params.exportBuffer.copyToChannel(this.params.exportDataR,1,0)\n*/\n\n       let tmp = this.params.exportBuffer.getChannelData(0);\n       for (let sample=0; sample < this.params.exportDataL.length; sample++) \n           tmp[sample] = this.params.exportDataL[sample];\n\n       if (this.params.exportBuffer.numberOfChannels >= 2) {\n        tmp = this.params.exportBuffer.getChannelData(1);\n        for (let sample=0; sample < this.params.exportDataR.length; sample++) \n           tmp[sample] = this.params.exportDataR[sample];\n       }\n\n         this.fakeDownload(this.params.exportBuffer);\n         this.params.save = false;\n         this.setState({saveButtonStr: 'ExportWav'});\n         this.params.isPlaying = false;\n\n       } // end 100%\n     });\n\n    this.params.isPlaying = true;\n    shifter.connect(saverNode);\n    saverNode.connect(gainNode);\n    gainNode.connect(audioCtx.destination);\n\n    this.setState({saveButtonStr: 'AbortExport'});\n    console.log ('handleSaveB: ExportWav END');\n\n    return;\n  } // end handleSaveB\n\n  handleLoop(event) {\n    console.log ('handleLoop');\n\n    if (event.target.name === 'setA') {\n      this.setState ({timeA: this.state.playingAt});\n      this.setState ({playingAtSlider: this.state.playingAt});\n    }\n    if (event.target.name === 'setB'){\n      if (this.state.playingAt >=  this.state.timeA)\n        this.setState ({timeB: parseFloat(this.state.playingAt)});\n      else\n        this.setState ({timeB: parseFloat(this.state.timeA) + parseFloat(10)});\n    }\n\n    if (event.target.name === 'LoopAB'){\n\n      if (this.state.loopButtonStr === 'LoopAB'){ \n        console.log ('handleLoop: LoopAB', 'playing', this.params.isPlaying);\n\n        if (this.params.isPlaying) return;\n\n        if (shifter){\n          shifter.disconnect();\n          shifter.off();\n        }\n\n        this.setState ({loopButtonStr: 'StopLoop'});\n        this.params.loop = true;\n        this.handlePlay({target: {name: 'LoopAB'}});\n\n      } \n      else if (this.state.loopButtonStr === 'StopLoop'){\n        console.log ('handleLoop: StopLoop',  \n                 'playing', this.params.isPlaying);\n        if (!this.params.isPlaying) return;\n\n        if (shifter){\n          shifter.disconnect();\n          shifter.off();\n          shifter = null;\n        }\n\n        this.params.loop = false;\n        this.params.isPlaying = false;\n        this.setState ({loopButtonStr: 'LoopAB'});\n      }\n    }\n\n// reset\n    if (event.target.name === 'reset') {\n      console.log ('handleLoop: reset')\n\n      if (shifter) { shifter.disconnect(); shifter.off(); shifter = null; }\n      this.setState({startButtonStr: 'PlayFromA', \n          playingAt: 0, timeA: 0, timeB: this.params.audioBuffer.duration})\n\n      this.params.loop = false;\n      this.params.isPlaying = false;\n      this.setState ({loopButtonStr: 'LoopAB'});\n\n    return;\n   } // end reset\n  }\n \n} // end class\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}