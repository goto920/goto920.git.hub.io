(this["webpackJsonpsimple-mixer"]=this["webpackJsonpsimple-mixer"]||[]).push([[0],{33:function(t){t.exports=JSON.parse('{"en":{"title1":"KG\'s Simple Mixer for stem files","title2":"with speed/pitch control","alert":"Select file(s) first!","switchLang":"\u65e5\u672c\u8a9e\u306b\u5207\u308a\u66ff\u3048","fileReader":"Select file(s) at once or add one by one. Local or on a cloud drive","clearButton":"Clear","clearFiles":"Clear all imported files","timeTitle":"Time","timeSlider":"Pause or Stop playback to move","timeSliderPosition":"Slider position","setA":"Set timeA at slider position","setB":"Set timeB at slider position","resetAB":"Reset Time A and B","playerTitle":"Player Controls","playButton":"Play/Pause/Resume","stopButton":"Stop and rewind to timeA","loopButton":"Loop on/off (with 2 sec interval)","exportButton":"Supports speed > 100%. Export the mix (download and play)","playMixButton":"Supports speed > 100%. Process and play the mix once","bypassButton":"Bypass Speed/Pitch control","speedTitle1":"Speed","speedTitle2":"(50 -- 200, real-time<= 100)","pitchTitle":"Pitch","masterGainTitle":"Master Gain","trackGainTitle":"Track Gain","version":"Version","url":"https://goto920.github.io/demos/simple-mixer/","guide":"Guide/Update","credit":"Speed/pitch control by modified"},"ja":{"title1":"KG\u306estem\u30d5\u30a1\u30a4\u30eb\u7528\u30b7\u30f3\u30d7\u30eb\u30df\u30ad\u30b5\u30fc","title2":"\u901f\u5ea6/\u30d4\u30c3\u30c1(\u97f3\u7a0b) \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u4ed8\u304d","alert":"\u6700\u521d\u306b1\u3064\u4ee5\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u3093\u3067\u4e0b\u3055\u3044","switchLang":"Switch to English","fileReader":"\u30ed\u30fc\u30ab\u30eb\u307e\u305f\u306f\u30af\u30e9\u30a6\u30c9\u30c9\u30e9\u30a4\u30d6\u4e0a\u306e1\u3064\u4ee5\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u307e\u3068\u3081\u3066\u3001\u307e\u305f\u306f1\u3064\u305a\u3064\u8ffd\u52a0","clearButton":"\u30af\u30ea\u30a2","clearFiles":"\u8aad\u307f\u8fbc\u3093\u3060\u30d5\u30a1\u30a4\u30eb\u306e\u5168\u6d88\u53bb","timeTitle":"\u6642\u9593","timeSliderPosition":"\u30b9\u30e9\u30a4\u30c0\u4f4d\u7f6e","timeSlider":"\u518d\u751f\u3092\u4e00\u6642\u505c\u6b62/\u7d42\u4e86\u3057\u3066\u52d5\u304b\u3057\u3066\u306d","setA":"\u30b9\u30e9\u30a4\u30c0\u4f4d\u7f6e\u306btimeA\u3092\u30bb\u30c3\u30c8","setB":"\u30b9\u30e9\u30a4\u30c0\u4f4d\u7f6e\u306btimeB\u3092\u30bb\u30c3\u30c8","resetAB":"Time A and B\u3092\u30ea\u30bb\u30c3\u30c8","playerTitle":"\u30d7\u30ec\u30fc\u30e4\u64cd\u4f5c","playButton":"\u518d\u751f/\u4e00\u6642\u505c\u6b62/\u518d\u958b","stopButton":"\u518d\u751f\u7d42\u4e86\u3057\u3066timeA\u306b\u623b\u3059","loopButton":"\u30eb\u30fc\u30d7on/off (2\u79d2\u9593\u9694)","exportButton":"\u901f\u5ea6 > 100%\u3082OK! \u30df\u30c3\u30af\u30b9\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8 (\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u518d\u751f\u7528)","playMixButton":" \u901f\u5ea6> 100%\u3082OK! \u30df\u30c3\u30af\u30b9\u51e6\u7406\u5f8c\u4e00\u56de\u518d\u751f","bypassButton":"\u901f\u5ea6/\u97f3\u7a0b\u5909\u66f4\u3092\u30d0\u30a4\u30d1\u30b9","speedTitle1":"\u518d\u751f\u901f\u5ea6","speedTitle2":"(50 -- 200, \u5b9f\u6642\u9593<= 100)","pitchTitle":"\u97f3\u7a0b","masterGainTitle":"\u30de\u30b9\u30bf\u30fc\u30b2\u30a4\u30f3","trackGainTitle":"\u30c8\u30e9\u30c3\u30af\u30b2\u30a4\u30f3","version":"\u30d0\u30fc\u30b8\u30e7\u30f3","url":"https://goto920.github.io/demos/simple-mixer/index-jp.html","guide":"\u30ac\u30a4\u30c9/\u66f4\u65b0","credit":"\u901f\u5ea6/\u30d4\u30c3\u30c1\u5909\u66f4\u306f\u4fee\u6b63\u3057\u305f"}}')},48:function(t){t.exports=JSON.parse('{"name":"simple-mixer","version":"0.1.0","private":true,"homepage":".","subversion":"20210309-01","dependencies":{"@material-ui/core":"^4.11.3","@material-ui/icons":"^4.11.2","@testing-library/jest-dom":"^5.11.9","@testing-library/react":"^11.2.5","@testing-library/user-event":"^12.7.3","audiobuffer-to-wav":"^1.0.0","file-saver":"^2.0.5","import":"0.0.6","rc-slider":"^9.7.1","react":"^17.0.1","react-bootstrap-icons":"^1.3.0","react-dom":"^17.0.1","react-scripts":"4.0.3","reactstrap":"^8.9.0","soundtouchjs":"^0.1.26","web-vitals":"^0.2.4","workbox-background-sync":"^5.1.4","workbox-broadcast-update":"^5.1.4","workbox-cacheable-response":"^5.1.4","workbox-core":"^5.1.4","workbox-expiration":"^5.1.4","workbox-google-analytics":"^5.1.4","workbox-navigation-preload":"^5.1.4","workbox-precaching":"^5.1.4","workbox-range-requests":"^5.1.4","workbox-routing":"^5.1.4","workbox-strategies":"^5.1.4","workbox-streams":"^5.1.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},72:function(t,e,i){},73:function(t,e,i){},81:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(8),s=i.n(a),r=(i(72),i(5)),o=i(6),l=i(19),c=i(23),u=i(22),d=(i(73),i(40)),h=function(){},p=function(t){Object(c.a)(i,t);var e=Object(u.a)(i);function i(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;return Object(r.a)(this,i),(n=e.call(this,null,t,a)).callback=a,n.sourceSound=[],n.historyBufferSize=22050,n._sourcePosition=0,n.outputBufferPosition=0,n._position=0,n}return Object(o.a)(i,[{key:"putSource",value:function(t){for(var e=0;e<t.length;e++)this.sourceSound.push(t[e])}},{key:"extractSource",value:function(t,e){var i=0;return this.sourceSound.length<2*e?i=0:(t.set(this.sourceSound.slice(0,2*e)),this.sourceSound.splice(0,2*e),i=e),i}},{key:"fillInputBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Float32Array(2*t),i=this.extractSource(e,t);i>0&&this.inputBuffer.putSamples(e,0,i)}}]),i}(d.a),f=i(46),g=i(47),m=function(){},b=function(){function t(e,i,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(r.a)(this,t),console.log("new MyPitchShifter instance"),this.context=e,this.bufferSize=n,this.record=a,this.bypass=s,this.recordedSamples=[[],[]],this.lastPlayingAt=0,this._soundtouch=new d.b,this._filter=new p(this._soundtouch,m),this._onEnd=m,this._onUpdate=m,this._onUpdateInterval=.5,this._node=e.createScriptProcessor(n,2,2),this._node.onaudioprocess=this.onaudioprocess.bind(this),this._totalInputFrames=i,this._recordedBuffer=null,this._nVirtualOutputFrames=0,this._playingAt=0,this.outSamples=new Float32Array(2*n),this.inSamples=new Float32Array(2*n),this.sampleRate=e.sampleRate,this.nInputFrames=0}return Object(o.a)(t,[{key:"totalInputFrames",get:function(){return this._totalInputFrames},set:function(t){this._totalInputFrames=t}},{key:"totalVirtualOutputFrames",get:function(){return this._nVirtualOutputFrames}},{key:"playingAt",get:function(){return this._playingAt}},{key:"node",get:function(){return this._node}},{key:"tempo",get:function(){return this._soundtouch.tempo},set:function(t){this._soundtouch.tempo=t}},{key:"pitch",set:function(t){this._soundtouch.pitch=t}},{key:"rate",get:function(){return this._soundtouch.rate}},{key:"recordedBuffer",get:function(){return null===this._recordedBuffer&&this.createProcessedBuffer(),this._recordedBuffer}},{key:"onEnd",set:function(t){this._onEnd=t}},{key:"onUpdate",set:function(t){this._onUpdate=t}},{key:"onUpdateInterval",get:function(){return this._onUpdateInterval},set:function(t){this._onUpdateInterval=t}},{key:"stop",value:function(){this._node.onaudioprocess&&(console.log("shifter stop"),this._node.onaudioprocess=null,this._node.disconnect(),this._onEnd())}},{key:"createProcessedBuffer",value:function(){if(this.record){var t=this.context.createBuffer(this.recordedSamples.length,this.recordedSamples[0].length,this.sampleRate),e=t.getChannelData(0),i=t.getChannelData(1);e.set(this.recordedSamples[0]),i.set(this.recordedSamples[1]),this._recordedBuffer=t}}},{key:"onaudioprocess",value:function(t){if(this.bypass)this._nVirtualOutputFrames<=this._totalInputFrames?(this.passThrough(t.inputBuffer,t.outputBuffer),this._nVirtualOutputFrames+=t.outputBuffer.length):this.stop();else if(this._nVirtualOutputFrames<=this._totalInputFrames){var e=this.process(t.inputBuffer,t.outputBuffer);this._nVirtualOutputFrames+=e*this._soundtouch.tempo}else this.stop();this._playingAt=this._nVirtualOutputFrames/this.sampleRate,this.playingAt-this.lastPlayingAt>=this._onUpdateInterval&&(this._onUpdate(),this.lastPlayingAt=this._playingAt),this.nInputFrames+=t.inputBuffer.length}},{key:"process",value:function(t,e){for(var i=t.getChannelData(0),n=t.getChannelData(1),a=this.inSamples,s=e.getChannelData(0),r=e.getChannelData(1),o=0;o<t.length;o++)a[2*o]=i[o],a[2*o+1]=n[o];this._filter.putSource(a);for(var l=this.outSamples,c=this._filter.extract(l,this.bufferSize),u=0;u<c;u++)s[u]=l[2*u],r[u]=l[2*u+1],this.record&&(this.recordedSamples[0].push(s[u]),this.recordedSamples[1].push(r[u]));return c}},{key:"passThrough",value:function(t,e){for(var i=e.numberOfChannels,n=0;n<i;n++){var a=t.getChannelData(n);if(e.getChannelData(n).set(t.getChannelData(n)),this.record)for(var s=0;s<e.length;s++)this.recordedSamples[n].push(a[s])}}},{key:"exportToFile",value:function(t){if(this.record){console.log("exportToFile: ",t,"length: ",this.recordedSamples[0].length),null===this._recordedBuffer&&this.createProcessedBuffer();var e=new Blob([g(this._recordedBuffer)],{type:"audio/vnd.wav"});Object(f.saveAs)(e,t)}}}]),t}(),j=i(48),x=i(33),y=i(99),v=i(100),O=i(41),S=i.n(O),A=i(59),k=i.n(A),w=i(60),B=i.n(w),P=i(61),C=i.n(P),_=i(62),F=i.n(_),T=i(35),G=i.n(T),N=i(34),I=i.n(N),R=i(63),U=i.n(R),M=i(64),D=i.n(M),L=i(1),E=j.subversion,V="en",W=x.en;"ja"===window.navigator.language.slice(0,2)&&(V="ja",W=x.ja);var J=!1;(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))&&(J=!0),window.AudioContext=window.AudioContext||window.webkitAudioContext,window.OfflineAudioContext=window.OfflineAudioContext||window.webkitOfflineAudioContext;var K=function(t){Object(c.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this)).audioCtx=new AudioContext,n.inputAudio=[],n.mixedSource=null,n.masterGainNode=null,n.state={language:V,isPlaying:!1,timeA:0,playingAt:0,timeB:0,loop:!1,loopDelay:2,startButtonStr:"load files first!",gains:[],masterGain:75,playSpeed:1,playPitch:0,bypass:!1},n.shifter=null,n.loadFiles=n.loadFiles.bind(Object(l.a)(n)),n.handlePlay=n.handlePlay.bind(Object(l.a)(n)),n.handleGainSlider=n.handleGainSlider.bind(Object(l.a)(n)),n.handleTimeSlider=n.handleTimeSlider.bind(Object(l.a)(n)),n.playAB=n.playAB.bind(Object(l.a)(n)),n.switchLanguage=n.switchLanguage.bind(Object(l.a)(n)),n}return Object(o.a)(i,[{key:"componentWillUnmount",value:function(){null!==this.audioCtx&&this.audioCtx.close()}},{key:"render",value:function(){var t=this,e=function(){var e;switch(t.state.startButtonStr){case"load files first!":e=Object(L.jsx)(y.a,{title:W.alert,children:Object(L.jsx)("span",{children:Object(L.jsx)(v.a,{onClick:function(){return t.handlePlay({target:{name:"startPause"}})},children:Object(L.jsx)(S.a,{color:"disabled"})})})});break;case"Play":e=Object(L.jsx)(y.a,{title:W.playButton,children:Object(L.jsx)(v.a,{onClick:function(){return t.handlePlay({target:{name:"startPause"}})},children:Object(L.jsx)(S.a,{color:"primary"})})});break;case"Resume":e=Object(L.jsx)(v.a,{onClick:function(){return t.handlePlay({target:{name:"startPause"}})},children:Object(L.jsx)(S.a,{style:{color:"#00aa00"}})});break;case"Pause":e=Object(L.jsx)(v.a,{onClick:function(){return t.handlePlay({target:{name:"startPause"}})},children:Object(L.jsx)(k.a,{color:"primary"})});break;default:e="undefined"}return Object(L.jsx)("span",{children:e})};this.inputAudio.sort((function(t,e){return t.name-e.name}));var i="";this.state.gains.length>0&&(i=this.state.gains.map((function(e,i){return Object(L.jsx)("div",{className:"slider",children:Object(L.jsxs)("center",{children:[t.inputAudio[i].name," (",t.state.gains[i],")",Object(L.jsx)("br",{}),"0 ",Object(L.jsx)("input",{type:"range",id:i,name:"gainSlider",min:"0",max:"100",value:t.state.gains[i],onChange:t.handleGainSlider})," 100"]})},i)})));var n=function(){return Object(L.jsxs)("span",{children:[Object(L.jsxs)("div",{className:"text-divider",children:[W.speedTitle1,"(",Object(L.jsxs)("font",{color:"green",children:[(100*t.state.playSpeed).toFixed(0),"%)"]}),"\xa0 ",W.speedTitle2]}),Object(L.jsxs)("center",{children:["\xb1 10% ",Object(L.jsxs)(v.a,{onClick:function(){return t.setSpeed({target:{name:"sub10"}})},children:[Object(L.jsx)(I.a,{color:"primary"})," "]}),Object(L.jsxs)(v.a,{onClick:function(){return t.setSpeed({target:{name:"add10"}})},children:[Object(L.jsx)(G.a,{color:"primary"})," "]}),"\xa0\xa0\xa0 \xb1 1% ",Object(L.jsxs)(v.a,{onClick:function(){return t.setSpeed({target:{name:"sub1"}})},children:[Object(L.jsx)(I.a,{color:"primary"})," "]}),Object(L.jsxs)(v.a,{onClick:function(){return t.setSpeed({target:{name:"add1"}})},children:[Object(L.jsx)(G.a,{color:"primary"})," "]})]}),Object(L.jsxs)("div",{className:"text-divider",children:[W.pitchTitle,"\xa0 (",Object(L.jsx)("font",{color:"green",children:t.state.playPitch.toFixed(1)}),") (-12 -- +12)"]}),Object(L.jsxs)("center",{children:["b/# ",Object(L.jsxs)(v.a,{onClick:function(){return t.setPitch({target:{name:"sub1"}})},children:[Object(L.jsx)(I.a,{color:"primary"})," "]}),Object(L.jsxs)(v.a,{onClick:function(){return t.setPitch({target:{name:"add1"}})},children:[Object(L.jsx)(G.a,{color:"primary"})," "]}),"\xa0\xa0\xa0 \xb1 10 cents ",Object(L.jsxs)(v.a,{onClick:function(){return t.setPitch({target:{name:"sub10c"}})},children:[Object(L.jsx)(I.a,{color:"primary"})," "]}),Object(L.jsxs)(v.a,{onClick:function(){return t.setPitch({target:{name:"add10c"}})},children:[Object(L.jsx)(G.a,{color:"primary"})," "]})]})]})};return Object(L.jsxs)("div",{className:"App",children:[W.title1,Object(L.jsx)("br",{}),W.title2," \u2003",Object(L.jsx)("span",{className:"small-button",children:Object(L.jsx)(y.a,{title:W.switchLang,children:Object(L.jsx)("button",{onClick:this.switchLanguage,children:"ja"===this.state.language?"EN":"JP"})})}),Object(L.jsx)("hr",{}),Object(L.jsxs)("span",{className:"selectFile",children:[Object(L.jsx)(y.a,{title:W.fileReader,children:Object(L.jsx)("input",{type:"file",name:"loadFiles",multiple:!0,accept:"audio/*",onChange:this.loadFiles})}),"\u2003",Object(L.jsx)("span",{className:"tiny-button",children:Object(L.jsx)(y.a,{title:W.clearFiles,children:Object(L.jsx)("button",{name:"clearFile",onClick:function(){t.setState({gains:[],startButtonStr:"load files first!"}),t.inputAudio=[]},children:W.clearButton})})}),Object(L.jsx)("br",{})]}),Object(L.jsx)("br",{}),Object(L.jsxs)("div",{className:"text-divider",children:[W.timeTitle,"\xa0 (",W.timeSliderPosition,":\xa0",Object(L.jsx)("font",{color:"green",children:this.state.playingAt.toFixed(2)}),")"]}),Object(L.jsxs)("center",{children:["A: ",this.state.timeA.toFixed(2)," -- B: ",this.state.timeB.toFixed(2),"\u2003 song length: ",this.inputAudio[0]?this.inputAudio[0].data.duration.toFixed(2):0,Object(L.jsx)("br",{}),Object(L.jsx)("div",{className:"slider",children:Object(L.jsx)(y.a,{title:W.timeSlider,children:Object(L.jsx)("input",{type:"range",name:"timeSlider",min:"0",max:this.inputAudio[0]?this.inputAudio[0].data.duration:0,value:this.state.playingAt,onChange:this.handleTimeSlider})})}),Object(L.jsxs)("span",{className:"tiny-button",children:[Object(L.jsx)(y.a,{title:W.setA,children:Object(L.jsx)("button",{name:"setA",onClick:function(){return t.setState({timeA:t.state.playingAt})},children:"set A"})}),"\u2003",Object(L.jsx)(y.a,{title:W.setB,children:Object(L.jsx)("button",{name:"setB",onClick:function(){return t.setState({timeB:t.state.playingAt})},children:"set B"})}),"\u2003",Object(L.jsx)(y.a,{title:W.resetAB,children:Object(L.jsx)("button",{name:"reset",onClick:function(){return t.setState({timeA:0,timeB:t.inputAudio[0].data.duration})},children:"reset"})})]})]}),Object(L.jsx)("div",{className:"text-divider",children:W.playerTitle}),Object(L.jsxs)("center",{children:[Object(L.jsx)(e,{}),Object(L.jsx)(y.a,{title:W.stopButton,children:Object(L.jsx)(v.a,{onClick:function(){return t.handlePlay({target:{name:"stop"}})},children:Object(L.jsx)(B.a,{color:this.inputAudio.length?"primary":"disabled"})})}),Object(L.jsx)(y.a,{title:W.loopButton,children:Object(L.jsx)(v.a,{onClick:function(){t.setState({loop:!t.state.loop})},children:Object(L.jsx)(C.a,{color:this.state.loop?"secondary":"primary"})})}),Object(L.jsx)(y.a,{title:W.exportButton,"aria-label":"exportFile",children:Object(L.jsx)(v.a,{onClick:function(){return t.handlePlay({target:{name:"exportFile"}})},children:Object(L.jsx)(F.a,{color:!this.inputAudio.length||this.state.isPlaying?"disabled":"primary"})})}),Object(L.jsx)(y.a,{title:W.playMixButton,"aria-label":"playMix",children:Object(L.jsx)(v.a,{onClick:function(){return t.handlePlay({target:{name:"playMix"}})},children:Object(L.jsx)(U.a,{color:!this.inputAudio.length||this.state.isPlaying?"disabled":"primary"})})}),Object(L.jsx)(y.a,{title:W.bypassButton,children:Object(L.jsx)(v.a,{onClick:function(){return t.setState({bypass:!t.state.bypass})},children:Object(L.jsx)(D.a,{color:this.state.bypass?"disabled":"primary"})})})]}),this.state.bypass?"":Object(L.jsx)(n,{}),Object(L.jsxs)("div",{className:"slider",children:[Object(L.jsxs)("div",{className:"text-divider",children:[W.masterGainTitle,"\xa0 (",this.state.masterGain,")"]}),Object(L.jsxs)("center",{children:["0 ",Object(L.jsx)("input",{type:"range",id:"master",name:"gainSlider",min:"0",max:"150",value:this.state.masterGain,onChange:this.handleGainSlider})," 150"]})]},"master"),Object(L.jsx)("div",{className:"text-divider",children:W.trackGainTitle}),i,Object(L.jsx)("hr",{}),W.version,": ",E," \xa0\xa0",Object(L.jsx)("a",{href:W.url,target:"_blank",rel:"noreferrer",children:W.guide}),Object(L.jsx)("br",{}),W.credit,"\xa0",Object(L.jsx)("a",{href:"https://github.com/cutterbl/SoundTouchJS",target:"_blank",rel:"noreferrer",children:"SoundTouchJs"}),Object(L.jsx)("br",{}),Object(L.jsx)("hr",{})]})}},{key:"loadFiles",value:function(t){var e=this;if("loadFiles"===t.target.name&&0!==t.target.files.length){var i=t.target.files;null===this.audioCtx&&(this.audioCtx=new window.AudioContext);for(var n=function(t){var n=new FileReader;n.onload=function(e){this.audioCtx.decodeAudioData(n.result,function(e){this.inputAudio.push({name:i[t].name,data:e,source:null,gainNode:null,gain:100}),console.log("inputAudio, gains length",this.inputAudio.length,this.state.gains.length);var n=this.state.gains;n.push(100),this.setState({startButtonStr:"Play",timeA:0,playingAt:0,timeB:this.inputAudio[0].data.duration,gains:n})}.bind(this),(function(t){console.log("decode error: "+t.err)}))}.bind(e),n.onerror=function(t){console.log("File read ",n.error)},n.readAsArrayBuffer(i[t])},a=0;a<i.length;a++)n(a)}}},{key:"playAB",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none";if(console.log("playAB","delay, timeA, timeB, offline, recording, exporter = ",t,e,i,a,n,s),!this.state.isPlaying){"suspended"===this.audioCtx.state&&this.audioCtx.resume(),this.setState({isPlaying:!0}),this.shifter=null;var r,o=this.inputAudio[0].data.sampleRate,l=this.inputAudio[0].data.numberOfChannels,c=(i-e)*o,u=Math.max(c,c/this.state.playSpeed);a?(r=new window.OfflineAudioContext(l,u+1*o,o),window.OfflineAudioContext.suspend&&r.suspend()):r=this.audioCtx;var d=new b(r,c,4096,n,this.state.bypass);if(a||(this.shifter=d),d.tempo=this.state.playSpeed,d.pitch=Math.pow(2,this.state.playPitch/12),!a){var h=r.createGain();h.gain.value=this.state.masterGain/100,this.masterGainNode=h}for(var p=0;p<this.inputAudio.length;p++){var f=r.createBufferSource();f.buffer=this.inputAudio[p].data,this.inputAudio[p].source=f;var g=r.createGain();g.gain.value=this.state.gains[p]/100,this.inputAudio[p].gainNode=g,f.connect(g),g.connect(d.node)}if(a)d.node.connect(r.destination);else{var m=r.createGain();this.masterGainNode=m,m.gain.value=this.state.masterGain/100,d.node.connect(m),m.connect(r.destination)}for(var j=r.currentTime+t,x=0;x<this.inputAudio.length;x++)this.inputAudio[x].source.start(j,e,i-e);a&&r.startRendering(),this.setState({playingAt:e}),d.onUpdateInterval=a?10:1,d.onUpdate=function(){this.setState({playingAt:e+d.playingAt})}.bind(this),d.onEnd=function(){console.log("MyPitchShifter.onEnd");for(var t=0;t<this.inputAudio.length;t++)this.inputAudio[t].gainNode.disconnect();if("exportFile"===s)d.exportToFile("mix_"+Date.now()+".wav");else if("playMix"===s){console.log("playing mix");var e=this.audioCtx,i=e.createBufferSource();this.mixedSource=i,i.buffer=d.recordedBuffer;var n=e.createGain();this.masterGainNode=n,n.gain.value=1,i.connect(this.masterGainNode),n.connect(e.destination),i.start(),i.onended=function(t){this.mixedSource=null,this.setState({isPlaying:!1})}.bind(this)}this.shifter=null,this.setState({playingAt:this.state.timeA,isPlaying:!1}),!a&&this.state.loop?this.playAB(2,this.state.timeA,this.state.timeB):this.setState({startButtonStr:"Pause"})}.bind(this),this.inputAudio[0].source.onended=function(t){d.stop(),this.setState({isPlaying:!1,startButtonStr:"Play"})}.bind(this),a&&(r.oncomplete=function(t){console.log("Offline render complete (data is useless though) length = ",t.renderedBuffer.length)})}}},{key:"handleTimeSlider",value:function(t){"timeSlider"===t.target.name&&(this.state.isPlaying||this.setState({playingAt:parseFloat(t.target.value)}))}},{key:"handlePlay",value:function(t){if(console.log("handlePlay name/button",t.target.name,this.state.startButtonStr),0===this.inputAudio.length&&alert(W.alert),"startPause"!==t.target.name){if("stop"===t.target.name){if(0===this.inputAudio.length&&null===this.mixedSource)return;for(var e=0;e<this.inputAudio.length;e++)this.inputAudio[e].source&&this.inputAudio[e].source.stop();return this.mixedSource&&this.mixedSource.stop(),void this.setState({loop:!1,startButtonStr:"Play",playingAt:this.state.timeA})}if("exportFile"===t.target.name||"playMix"===t.target.name){if(0===this.inputAudio.length||this.state.isPlaying)return;var i=!0;return J&&(i=!1),void this.playAB(0,this.state.timeA,this.state.timeB,!0,i,t.target.name)}}else switch(this.state.startButtonStr){case"Pause":console.log("Pause"),this.audioCtx&&this.audioCtx.suspend(),this.setState({startButtonStr:"Resume",isPlaying:!1});break;case"Resume":console.log("Resume"),"suspended"===this.audioCtx.state&&this.audioCtx.resume(),this.setState({startButtonStr:"Pause",isPlaying:!0});break;case"Play":if(console.log("Play"),0===this.inputAudio.length)break;this.playAB(0,this.state.timeA,this.state.timeB),this.setState({startButtonStr:"Pause"});break;default:console.log("default",this.state.startButtonStr)}}},{key:"handleGainSlider",value:function(t){if("gainSlider"===t.target.name){if("master"===t.target.id)return this.setState({masterGain:parseFloat(t.target.value)}),void(this.masterGainNode&&(this.masterGainNode.gain.value=parseFloat(t.target.value/100)));var e=parseInt(t.target.id),i=this.state.gains;i[e]=parseInt(t.target.value),this.setState({gains:i}),null!==this.inputAudio[e].gainNode&&(this.inputAudio[e].gainNode.gain.value=parseFloat(t.target.value/100))}}},{key:"setSpeed",value:function(t){var e=this.state.playSpeed;switch(t.target.name){case"sub10":e-=.1;break;case"add10":e+=.1;break;case"sub1":e-=.01;break;case"add1":e+=.01}e<.5?e=.5:e>2&&(e=2),this.shifter&&(this.shifter.tempo=e),this.setState({playSpeed:e})}},{key:"setPitch",value:function(t){var e=this.state.playPitch;switch(t.target.name){case"sub1":e-=1;break;case"add1":e+=1;break;case"sub10c":e-=.1;break;case"add10c":e+=.1}e<-12?e=-12:e>12&&(e=12),this.shifter&&(this.shifter.pitch=Math.pow(2,e/12)),this.setState({playPitch:e})}},{key:"switchLanguage",value:function(t){"ja"===this.state.language?(W=x.en,this.setState({language:"en"})):(W=x.ja,this.setState({language:"ja"}))}}]),i}(n.Component),z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function q(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var i=t.installing;null!=i&&(i.onstatechange=function(){"installed"===i.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var $=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,102)).then((function(e){var i=e.getCLS,n=e.getFID,a=e.getFCP,s=e.getLCP,r=e.getTTFB;i(t),n(t),a(t),s(t),r(t)}))};s.a.render(Object(L.jsx)(K,{}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");z?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(i){var n=i.headers.get("content-type");404===i.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):q(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):q(e,t)}))}}(),$()}},[[81,1,2]]]);
//# sourceMappingURL=main.9387e530.chunk.js.map